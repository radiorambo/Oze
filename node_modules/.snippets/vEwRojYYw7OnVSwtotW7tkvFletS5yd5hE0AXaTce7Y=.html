<pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-comment)">/// &lt;</span><span style="color: var(--shiki-token-string-expression)">reference</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">types</span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-token-string-expression)">"@sveltejs/kit"</span><span style="color: var(--shiki-token-comment)"> /&gt;</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(alias) const build: string[]&amp;#10;import build' >build</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(alias) const files: string[]&amp;#10;import files' >files</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(alias) const version: string&amp;#10;import version' >version</data-lsp> } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;$service-worker&apos;</span><span style="color: var(--shiki-color-text)">;</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-token-comment)">// Create a unique cache name for this deployment</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const CACHE: string' >CACHE</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">`cache-</span><span style="color: var(--shiki-token-keyword)">${</span><span style="color: var(--shiki-color-text)"><data-lsp lsp='(alias) const version: string&amp;#10;import version' >version</data-lsp></span><span style="color: var(--shiki-token-keyword)">}</span><span style="color: var(--shiki-token-string-expression)">`</span><span style="color: var(--shiki-color-text)">;</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const ASSETS: string[]' >ASSETS</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span></div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">...</span><span style="color: var(--shiki-color-text)"><data-lsp lsp='(alias) const build: string[]&amp;#10;import build' >build</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-comment)">// the app itself</span></div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">...</span><span style="color: var(--shiki-color-text)"><data-lsp lsp='(alias) const files: string[]&amp;#10;import files' >files</data-lsp>  </span><span style="color: var(--shiki-token-comment)">// everything in `static`</span></div><div class='line'><span style="color: var(--shiki-color-text)">];</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var self: Window &amp;amp; typeof globalThis' >self</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) addEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions | undefined): void (+1 overload)' >addEventListener</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;install&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: Event' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// Create a new cache and add all files to it</span></div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(local function) addFilesToCache(): Promise&amp;lt;void>' >addFilesToCache</data-lsp></span><span style="color: var(--shiki-color-text)">() {</span></div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const cache: Cache' >cache</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var caches: CacheStorage' >caches</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) CacheStorage.open(cacheName: string): Promise&amp;lt;Cache>' >open</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const CACHE: string' >CACHE</data-lsp></span><span style="color: var(--shiki-color-text)">);</span></div><span class="error"><span>Property 'waitUntil' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'waitUntil' does not exist on type 'Event'.</span><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const cache: Cache' >cache</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Cache.addAll(requests: Iterable&amp;lt;RequestInfo>): Promise&amp;lt;void> (+1 overload)' >addAll</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const ASSETS: string[]' >ASSETS</data-lsp></span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'><span style="color: var(--shiki-color-text)">	}</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >waitUntil</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(local function) addFilesToCache(): Promise&amp;lt;void>' >addFilesToCache</data-lsp></span><span style="color: var(--shiki-color-text)">());</span></div><div class='line'><span style="color: var(--shiki-color-text)">});</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var self: Window &amp;amp; typeof globalThis' >self</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) addEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions | undefined): void (+1 overload)' >addEventListener</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;activate&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: Event' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// Remove previous cached data from disk</span></div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(local function) deleteOldCaches(): Promise&amp;lt;void>' >deleteOldCaches</data-lsp></span><span style="color: var(--shiki-color-text)">() {</span></div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">for</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const key: string' >key</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">of</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var caches: CacheStorage' >caches</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) CacheStorage.keys(): Promise&amp;lt;string[]>' >keys</data-lsp></span><span style="color: var(--shiki-color-text)">()) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='const key: string' >key</data-lsp> </span><span style="color: var(--shiki-token-keyword)">!==</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const CACHE: string' >CACHE</data-lsp></span><span style="color: var(--shiki-color-text)">) </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var caches: CacheStorage' >caches</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) CacheStorage.delete(cacheName: string): Promise&amp;lt;boolean>' >delete</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='const key: string' >key</data-lsp>);</span></div><span class="error"><span>Property 'waitUntil' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'waitUntil' does not exist on type 'Event'.</span><div class='line'><span style="color: var(--shiki-color-text)">		}</span></div><div class='line'><span style="color: var(--shiki-color-text)">	}</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >waitUntil</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(local function) deleteOldCaches(): Promise&amp;lt;void>' >deleteOldCaches</data-lsp></span><span style="color: var(--shiki-color-text)">());</span></div><div class='line'><span style="color: var(--shiki-color-text)">});</span></div><span class="error"><span>Property 'request' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'request' does not exist on type 'Event'.</span><div class="line">
</div><div class='line'><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var self: Window &amp;amp; typeof globalThis' >self</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) addEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions | undefined): void (+1 overload)' >addEventListener</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;fetch&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: Event' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-comment)">// ignore POST requests etc</span></div><span class="error"><span>Property 'request' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'request' does not exist on type 'Event'.</span><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >request</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='any' >method</data-lsp> </span><span style="color: var(--shiki-token-keyword)">!==</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;GET&apos;</span><span style="color: var(--shiki-color-text)">) </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)">;</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(local function) respond(): Promise&amp;lt;Response>' >respond</data-lsp></span><span style="color: var(--shiki-color-text)">() {</span></div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const url: URL' >url</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='var URL: new (url: string | URL, base?: string | URL | undefined) => URL' >URL</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >request</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='any' >url</data-lsp>);</span></div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const cache: Cache' >cache</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var caches: CacheStorage' >caches</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) CacheStorage.open(cacheName: string): Promise&amp;lt;Cache>' >open</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const CACHE: string' >CACHE</data-lsp></span><span style="color: var(--shiki-color-text)">);</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// `build`/`files` can always be served from the cache</span></div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const ASSETS: string[]' >ASSETS</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Array&amp;lt;string>.includes(searchElement: string, fromIndex?: number | undefined): boolean' >includes</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const url: URL' >url</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) URL.pathname: string' >pathname</data-lsp>)) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const response: Response | undefined' >response</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const cache: Cache' >cache</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Cache.match(request: RequestInfo | URL, options?: CacheQueryOptions | undefined): Promise&amp;lt;Response | undefined>' >match</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const url: URL' >url</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) URL.pathname: string' >pathname</data-lsp>);</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='const response: Response | undefined' >response</data-lsp>) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='const response: Response' >response</data-lsp>;</span></div><div class='line'><span style="color: var(--shiki-color-text)">			}</span></div><div class='line'><span style="color: var(--shiki-color-text)">		}</span></div><div class="line">
</div><span class="error"><span>Property 'request' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'request' does not exist on type 'Event'.</span><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// for everything else, try the network first, but</span></div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-comment)">// fall back to the cache if we&apos;re offline</span></div><div class='line'><span style="color: var(--shiki-color-text)">		</span><span style="color: var(--shiki-token-keyword)">try</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const response: Response' >response</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function fetch(input: string | Request | URL, init?: RequestInit | undefined): Promise&amp;lt;Response> (+1 overload)' >fetch</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='any' >request</data-lsp>);</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-comment)">// if we&apos;re offline, fetch can return a value that is not a Response</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-comment)">// instead of throwing - and we can&apos;t pass this non-Response to respondWith</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">!</span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='const response: Response' >response</data-lsp> </span><span style="color: var(--shiki-token-keyword)">instanceof</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='var Response: {&amp;#10;    new (body?: BodyInit | null | undefined, init?: ResponseInit | undefined): Response;&amp;#10;    prototype: Response;&amp;#10;    error(): Response;&amp;#10;    json(data: any, init?: ResponseInit | undefined): Response;&amp;#10;    redirect(url: string | URL, status?: number | undefined): Response;&amp;#10;}' >Response</data-lsp></span><span style="color: var(--shiki-color-text)">)) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-keyword)">throw</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">new</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var Error: ErrorConstructor&amp;#10;new (message?: string | undefined, options?: ErrorOptions | undefined) => Error (+1 overload)' >Error</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;invalid response from fetch&apos;<data-err></data-err></span><span style="color: var(--shiki-color-text)">);</span></div><span class="error"><span>Property 'request' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'request' does not exist on type 'Event'.</span><div class='line'><span style="color: var(--shiki-color-text)">			}</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const response: Response' >response</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) Response.status: number' >status</data-lsp> </span><span style="color: var(--shiki-token-keyword)">===</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">200</span><span style="color: var(--shiki-color-text)">) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const cache: Cache' >cache</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Cache.put(request: RequestInfo | URL, response: Response): Promise&amp;lt;void>' >put</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='any' >request</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const response: Response' >response</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Response.clone(): Response' >clone</data-lsp></span><span style="color: var(--shiki-color-text)">());</span></div><div class='line'><span style="color: var(--shiki-color-text)">			}</span></div><span class="error"><span>Property 'request' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'request' does not exist on type 'Event'.</span><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='const response: Response' >response</data-lsp>;</span></div><div class='line'><span style="color: var(--shiki-color-text)">		} </span><span style="color: var(--shiki-token-keyword)">catch</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(local var) err: unknown' >err</data-lsp>) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const response: Response | undefined' >response</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const cache: Cache' >cache</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Cache.match(request: RequestInfo | URL, options?: CacheQueryOptions | undefined): Promise&amp;lt;Response | undefined>' >match</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='any' >request</data-lsp>);</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='const response: Response | undefined' >response</data-lsp>) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">				</span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='const response: Response' >response</data-lsp>;</span></div><div class='line'><span style="color: var(--shiki-color-text)">			}</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-comment)">// if there&apos;s no cache, then just error out</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-comment)">// as there is nothing we can do to respond to this request</span></div><div class='line'><span style="color: var(--shiki-color-text)">			</span><span style="color: var(--shiki-token-keyword)">throw</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(local var) err: unknown' >err</data-lsp>;</span></div><span class="error"><span>Property 'respondWith' does not exist on type 'Event'.</span><span class="code">2339</span></span><span class="error-behind">Property 'respondWith' does not exist on type 'Event'.</span><div class='line'><span style="color: var(--shiki-color-text)">		}</span></div><div class='line'><span style="color: var(--shiki-color-text)">	}</span></div><div class="line">
</div><div class='line'><span style="color: var(--shiki-color-text)">	</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: Event' >event</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >respondWith</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(local function) respond(): Promise&amp;lt;Response>' >respond</data-lsp></span><span style="color: var(--shiki-color-text)">());</span></div><div class='line'><span style="color: var(--shiki-color-text)">});</span></div></code></div></pre>